general:
  build_dir: Samples/Sample1/android

#ANDROID_HOME: /usr/local/android-sdk-linux
#ANDROID_NDK_HOME: ${ANDROID_NDK}
dependencies:
  pre:
    # Android SDK Platform 24
    - if [ ! -d "/usr/local/android-sdk-linux/platforms/android-23" ]; then echo y | android update sdk --no-ui --all --filter "android-23"; fi
    # Android SDK Build-tools, revision 24.0.0
    - if [ ! -d "/usr/local/android-sdk-linux/build-tools/23.0.1" ]; then echo y | android update sdk --no-ui --all --filter "build-tools-23.0.1"; fi
    # Android Support Repository, revision 39 / Local Maven repository for Support Libraries
    - if [ ! -d "/usr/local/android-sdk-linux/extras/android/m2repository/com/android/support/design/23.0.1" ]; then echo y | android update sdk --no-ui --all --filter "extra-android-m2repository"; fi
    
#    - ( sleep 5 && while [ 1 ]; do sleep 1; echo y; done ) | android update sdk --no-ui --all --filter "tools,platform-tools,android-23,extra-google-m2repository,extra-android-m2repository,extra-android-support"
#    - echo y | android update sdk --no-ui --all --filter "build-tools-23.0.1"

   - curl -L http://dl.google.com/android/ndk/android-ndk-r10e-linux-x86_64.bin -O
   - chmod u+x android-ndk-r10e-linux-x86_64.bin
   - ./android-ndk-r10e-linux-x86_64.bin > /dev/null
##  - rm android-ndk-r10e-linux-x86_64.bin
   - export ANDROID_NDK_HOME=`pwd`/android-ndk-r10e
   - export LOCAL_ANDROID_NDK_HOME="$ANDROID_NDK_HOME"
   - export LOCAL_ANDROID_NDK_HOST_PLATFORM="linux-x86_64"
   - export PATH=$PATH:${ANDROID_NDK_HOME}
   - env
#   - ANDROID_NDK_HOME=${ANDROID_NDK}
#   - echo ANDROID_NDK_HOME = ${ANDROID_NDK_HOME}
#   - echo ANDROID_NDK = ${ANDROID_NDK}

#    - install_ndk
#    - ANDROID_NDK_HOME=${ANDROID_NDK}

#  cache_directories:
#    - /usr/local/android-sdk-linux/platforms/android-23
#    - /usr/local/android-sdk-linux/build-tools/23.0.1
#    - /usr/local/android-sdk-linux/extras/android/m2repository

compile:
   - env
   - ./gradlew assembleDebug


#test:
#  override:
#    - android update sdk --no-ui --all --filter build-tools-24.0.0,android-24,extra-android-m2repository
#    - ./gradlew assembleDebug
#   - cd ./Samples/Sample1/android
#   - mv circle.local.properties local.properties
 

